<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
    <title>Project Zomboid B42 stats</title>
    <script>    // 배경색 기본값
      window.bgColorClass = "bg-white";
      window.bgbtbgColorClass = "bg-gray-200";
      window.textColorClass = "text-black";

      window.darkbgColorClass = "bg-gray-700";
      window.darkbtbgColorClass = "bg-gray-800";
      window.darktextColorClass = "text-white";

      window.blueBgColorClass = "bg-blue-500";

      const isDark = localStorage.getItem("darkMode") === "true";
      window.isDarkMode = isDark;
     
      //window.isDarkMode = ;window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? false : true  ;
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    
        <!-- 파비콘 추가 -->
        <link rel="icon" type="image/png" href="icons/Trait_slowlearner.png">
</head>
<body class="bg-white text-black flex items-center justify-center min-h-screen">
  <div class="w-full lg:max-w-5xl lg:mx-auto bg-gray-200 rounded-xl shadow p-4">
    
    <!-- 왼쪽 전체 (스크롤되는 부분) -->
    <div class="flex-1 ">
      <!-- 상단 고정 영역 -->
      <div class="sticky top-0 bg-white z-10 p-4 rounded-2xl shadow-md max-h-[15vh]">
        <h2 id="titlename" class="lg:text-2xl sm:text-4xl font-bold mb-2 text-center">
          B42 project Zomboid 직업 및 특성 계산기 
        </h2>

        <div class="flex space-x-2 mb-4">
          <!-- 모달 열기 버튼 -->
          <button id="openModalBtn" class="px-4 py-2 bg-blue-500 text-white lg:text-lg sm:text-2xl rounded-lg shadow">
            공지사항
          </button>
          <button id="toggleDark" class="px-4 py-2 lg:text-lg sm:text-2xl bg-gray-200 rounded">어둠의Dark</button>
          <button id="lang-ko" class="px-4 py-2 lg:text-lg sm:text-2xl bg-gray-200 rounded">한국어</button>
          <button id="lang-en" class="px-4 py-2 lg:text-lg sm:text-2xl bg-gray-200 rounded">English</button>
        </div>
      </div>
  
    <!-- 반응형 레이아웃, 최대높이-->
    <div class="grid grid-cols-2 grid-rows-2 gap-2 lg:flex lg:space-x-4 sm:max-h-[60vh] lg:max-h-[70vh]">

      

      <!-- 결과 -->
      <div id="result-panel" class="border rounded-xl p-2 overflow-y-auto lg:w-40 min-w-[240px] mg-2">
        <h3 id="result-preview" class="lg:text-lg sm:text-2xl font-bold text-center lg:hidden">결과 미리보기</h3> <!--UI변경함수 확인-->
        
        <div id="result-sum" class="gap-2 p-3 border rounded-md bg-white shadow text-md lg:text-md sm:text-2xl mr-2 font-bold text-center">
          합계: 0
        </div>

        <div id="resultPn" class="lg:columns-1 sm:columns-2 gap-2">
            <!--
            <div id="result-sum" class="gap-2 p-3 border rounded-md bg-white shadow lg:text-md sm:text-2xl mr-2 font-bold text-center text-green-600">
              합계: 0
            </div>
            -->
            <div id="result-strength" class="gap-2 px-2 py-1 border rounded-md bg-white shadow lg:text-sm sm:text-2xl mr-2 text-center text-black-600">
              근력: 0
            </div>
            <div id="result-fitness" class="gap-2 px-2 py-1 border rounded-md bg-white shadow lg:text-sm sm:text-2xl mr-2 text-center text-black-600">
              체력: 0
            </div>
          
        </div>
        <div id="result-icons">
          <!-- 직업 아이콘 -->
          <div id="job-icons" class="flex justify-center gap-2 mb-2"></div>

          <!-- 일반 아이콘 -->
          <div id="other-icons" class="flex flex-wrap justify-center gap-2 mr-1"></div>
        </div>
      
      </div>
      <!-- 직업 -->
      <div id="jobs" class="border rounded-md p-2 overflow-y-auto lg:flex-1 min-w-[200px] ">
        <h3 class="text-lg font-bold text-center lg:hidden">직업</h3>
      </div>
      <!-- 긍정 -->
      <div id="positive-items" class="border rounded-md p-2 overflow-y-auto lg:flex-1 min-w-[150px]">
        <h3 class="text-lg font-bold text-center lg:hidden">긍정</h3>
      </div>

      <!-- 부정 -->
      <div id="negative-items" class="border rounded-md p-2 overflow-y-auto lg:flex-1 min-w-[150px]">
        <h3 class="text-lg font-bold text-center lg:hidden">부정</h3>
      </div>

    </div>
  </div>
  <!-- 결과생성 버튼 -->
  <div class="flex justify-center mt-4 w-full">
    <button id="generateResultBtn" class="px-6 py-8 bg-blue-500 text-white lg:text-2xl sm:text-4xl rounded-lg shadow w-full">
      결과 생성
    </button>
  </div>
  <!-- 하단 바 -->
  <div class="mt-4 text-center">
    <p class="text-gray-500 text-2xl lg:text-sm"> <span id="version-text"></span> | 제작자: K0KK0R0 |
      프좀갤: <a href="https://gall.dcinside.com/mgallery/board/lists/?id=pzom" target="_blank" class="text-blue-500 underline text-2xl lg:text-sm">링크</a> |
       위키 링크: 
       <a href="https://pzwiki.net/wiki/Trait" target="_blank" class="text-blue-500 underline text-2xl lg:text-sm"> Trait</a> ,
       <a href="https://pzwiki.net/wiki/Occupation" target="_blank" class="text-blue-500 underline text-2xl lg:text-sm"> Occupation</a>  | 
       
    </p>
  </div>

  <!-- 모달 (처음엔 hidden) -->
  <div id="modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-80 z-50">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-2xl lg:max-w-2xl p-6 relative">
      <!-- 닫기 버튼 -->
      <button id="closeModalBtn" class="absolute top-2 right-2 text-gray-600 hover:text-black text-2xl sm:text-4xl">
        ✕
      </button>
      
      <h2 class="text-4xl lg:text-xl  font-bold mb-4">공지사항 </h2>
      <p class="mb-2 text-3xl md:text-lg"> 📢 <span id="version-text2"></span> 업데이트 안내</p>
      
      <p class="mb-1 text-3xl lg:text-xl">- 미니게임을 준비했습니다(추후 결과값 연동예정)</p>

      <p class="mb-1 text-2xl lg:text-lg">- 어둠의 Dark모드 적용(시스템 기본값을 따라갑니다) </p>
      <p class="mb-1 text-2xl lg:text-lg">- 결과값을 png파일로 저장 할 수 있도록 작업 </p>
      <p class="mb-1 text-2xl lg:text-lg">- 중복으로 선택 불가능한 트레잇 작업</p>    
      <p class="mb-1 text-2xl lg:text-lg">- Crafty(재주꾼) 특성 추가</p>
      <p class="mb-1 text-2xl lg:text-lg">** 본 항목은 정확하지 않을 수 있습니다. ** </p>
      <p class="mb-1 text-2xl lg:text-lg"> 자세한 내용은 공식 위키와 프좀갤을 참고하세요</p>
      
      <!--
      <div class="mt-4 text-right">
        <button id="closeModalBtn2" class="px-4 py-2 bg-gray-200 rounded-lg sm:text-4xl lg:text-2xl">닫기</button>
      </div>
      -->
    </div>
  </div>
  <!-- 게임 모달 -->
   <div id="gameModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-90 z-50 hidden">
    <div class="relative bg-white w-[95vw] min-h-[870px] rounded-2xl shadow-xl bg-gray-600">
      <!-- 닫기 버튼 -->
      <button id="closeGameModalBtn" class="absolute top-2 right-2 z-50 text-white-600 hover:text-black text-2xl sm:text-4xl">
        ✕
      </button> 

      <!-- 상단 아이템 바 -->
      <div class="flex items-center bg-gray-600 px-3 py-2">
        <div class="flex gap-2 space-x-1">
          <!-- 지역 설비들 -->
          <div id="storage" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/storage.png" alt="보관함" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              보관함
            </span>
          </div>
          <div id="generatorOn" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/generator.png" alt="발전기(켜짐)" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              발전기
            </span>
          </div>
          <div id="generatorOff" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/generatorOff.png" alt="발전기(꺼짐)" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              (꺼짐)
            </span>
          </div>
          <div id="bed" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/bed.png" alt="침대" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              침대
            </span>
          </div>
          <div id="sofa" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/sofa.png" alt="소파" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              소파
            </span>
          </div>
          <div id="faucet" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/faucet.png" alt="수전" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              수전
            </span>
          </div>
          <div id="oven" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/oven.png" alt="오븐" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              오븐
            </span>
          </div>
          <div id="micro" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/micro.png" alt="전자렌지" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              전자렌지
            </span>
          </div>
          <div id="fridge" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/fridge.png" alt="냉장고" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              냉장고
            </span>
          </div>
          <!--라이브스톡 관리-->
          <div id="livestock" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/livestock.png" alt="가축 관리" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              가축 관리
            </span>
          </div>
        </div>
      </div>

      <!-- 메인 배경화면 -->
      <div class="flex-grow flex items-center justify-center">
        <div class="relative w-full max-h-[600px] bg-gray-600 border-4 border-gray-500 overflow-hidden">
          <img id="mainBg" src="images/bg0_dark.png" alt="게임화면" class="w-full h-full object-cover  z-10">
          <!-- 날짜 텍스트 (이미지 안쪽 상단에 표시됨) -->
          <span id="timer" class="absolute top-2 left-2 text-white text-2xl font-bold bg-black/60 px-3 py-1 rounded z-50">
            7월 4일 07:00
          </span>
          <span id="mapName" class="absolute top-2 right-2 text-white text-xl font-bold bg-black/60 px-3 py-1 rounded z-50">
            웨스트포인트 : 가정집
          </span>
          <span id="zombieNum" class="absolute bottom-4 right-10 text-white text-2xl font-bold bg-black/60 px-3 py-1 rounded z-50">
            남은 좀비 : 2
          </span>

          <!--체력바-->
          <div id="healthBox" class="absolute top-16 left-4 z-50 w-48 h-6 rounded bg-gray-600 overflow-hidden">
            <div id="healthBar" class="h-full bg-red-500 transition-all duration-300" style="width: 70%;"></div>
            <span id="healthTxt" class="absolute inset-0 font-bold text-md text-black flex justify-center items-center">
              70 / 100
            </span>
          </div>
          <!--스태미너바-->
          <div id="staminaBox" class="absolute top-24 left-4 z-50 w-48 h-6 rounded bg-gray-600 overflow-hidden">
            <div id="staminaBar" class="h-full bg-yellow-300 transition-all duration-300" style="width: 70%;"></div>
            <span id="staminaTxt" class="absolute inset-0 font-bold text-md text-black flex justify-center items-center">
              70 / 100
            </span>
          </div>


          <!-- 플레이어 (왼쪽 아래 배치) -->
           <!--
          <img src="images/player.png" 
              id="player"
              class="absolute bottom-4 left-40 w-16 h-32 z-20 transition-all duration-100">
              -->
          <div id="player" class="absolute bottom-4 left-40 w-16 h-32 z-20 transition-all duration-100">
            <img src="images/player.png" class="absolutew-full h-full">
            <img id="equipWp" src="weapons/Axe.png" class="absolute bottom-4 left-0 w-12 h-12 rotate-90">
          </div>
          <img src="images/playerRest.png" 
              id="playerRest"
              class="absolute bottom-4 left-20 w-20 h-20 z-20 transition-all duration-100 hidden">

           <!-- 좀비들 (오른쪽 아래 배치) -->
          <img src="images/zb.png" 
              id="zombie0" 
              class="absolute bottom-4 right-60 w-16 h-32 z-20 transition-all duration-100">
          <img src="images/zb.png" 
              id="zombie1"
              class="absolute bottom-4 right-40 w-16 h-32 z-20 transition-all duration-100">
          <img src="images/zb.png" 
              id="zombie2"
              class="absolute bottom-4 right-20 w-16 h-32 z-20 transition-all duration-100">

          <span id="damage0" class="hidden font-bold text-green-600 text-4xl absolute bottom-4 right-60 w-16 h-32 z-20 transition-all duration-100">
            -10
          </span>
           <span id="damage1" class="hidden font-bold text-green-600 text-4xl absolute bottom-4 right-40 w-16 h-32 z-30 transition-all duration-100">
            -10
          </span>
           <span id="damage2" class="hidden font-bold text-green-600 text-4xl absolute bottom-4 right-20 w-16 h-32 z-10 transition-all duration-100">
            -10
          </span>

          <!-- 무기창 아이콘 (숨김) -->
          <div id="weaponIcon" class="absolute top-16 left-4 z-50 w-20 h-20 rounded bg-gray-200 hidden">
            <img id="weaponImg" src="images/attackBt.png" alt="무기" class="w-full h-full p-2 z-50" >
            <span id="weaponName" class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              무기이름
            </span>
          </div>
          <!-- 가방 아이콘  -->
          <div id="backpackIcon" class="absolute bottom-4 left-4 z-50 w-20 h-20 rounded bg-gray-200">
            <img id="backpackImg" src="backpacks/SheetSlingBag.png" alt="가방" class="w-full h-full p-2 z-50" >
            <span id="backpackName" class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              가방
            </span>
          </div>
          <!-- 무들 아이콘들 -->
          <div class="flex flex-col items-center gap-2 absolute top-12 right-2 ">
            <div id="Moodle_Icon_Tired" class="w-16 h-12 rounded bg-gray-600/80">      
              <img src="uxicons/Moodle_Icon_Tired.png" alt="무들" class="absolute w-12 h-12 z-50" >
              <img id="pgBar_Tired" src="uxicons/pgbar-1.png" alt="" class="absolute w-16 h-12 z-50" > 
            </div>
            <div id="Moodle_Icon_Endurance" class="w-16 h-12 rounded bg-gray-600/80">      
              <img src="uxicons/Moodle_Icon_Endurance.png" alt="무들" class="absolute w-12 h-12 z-50" >
              <img id="pgBar_Endurance" src="uxicons/pgbar-3.png" alt="" class="absolute w-16 h-12 z-50" > 
            </div>
            <div id="Moodle_Icon_Panic" class="w-16 h-12 rounded bg-gray-600/80">  
              <img src="uxicons/Moodle_Icon_Panic.png" alt="무들" class="absolute w-12 h-12 z-50" >
              <img id="pgBar_Panic" src="uxicons/pgbar-2.png" alt="" class="absolute w-16 h-12 z-50" > 
            </div>
            <div id="Moodle_Icon_Sick" class="w-16 h-12 rounded bg-gray-600/80">   
              <img src="uxicons/Moodle_Icon_Sick.png" alt="무들" class="absolute w-12 h-12 z-50" >
              <img id="pgBar_Sick" src="uxicons/pgbar-1.png" alt="" class="absolute w-16 h-12 z-50" > 
            </div>
            <div id="Moodle_Icon_Stressed" class="w-16 h-12 rounded bg-gray-600/80">  
              <img src="uxicons/Moodle_Icon_Stressed.png" alt="무들" class="absolute w-12 h-12 z-50" >
              <img id="pgBar_Stressed" src="uxicons/pgbar-2.png" alt="" class="absolute w-16 h-12 z-50" > 
            </div>
            <div id="Moodle_Icon_Zombie" class="w-16 h-12 rounded bg-gray-600/80">  
              <img src="uxicons/Moodle_Icon_Zombie.png" alt="무들" class="absolute w-12 h-12 z-50" >
              <img id="pgBar_Zombie" src="uxicons/pgbar-2.png" alt="" class="absolute w-16 h-12 z-50" > 
            </div>
          </div>
        </div>
      </div>

      <!-- 하단 버튼 바 -->
      <div class="flex items-center bg-gray-600 px-3 py-2">
         <div class="flex gap-2 space-x-1">
          <!-- 액션 버튼들 -->
           <div id="pushBt" class="lg:w-32 lg:h-16 sm:w-32 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/pushBt.png" alt="밀치기" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              밀치기
            </span>
          </div>
          <div id="attackBt" class="lg:w-48 lg:h-16 sm:w-32 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/attackBt.png" alt="공격하기" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              공격하기
            </span>
          </div>
          
          <div id="restBt" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/restBt.png" alt="휴식" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              휴식
            </span>
          </div>
          <div id="sleepBt" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="images/sleepBt.png" alt="잠자기" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              잠자기
            </span>
          </div>
          <div id="atHomeBt" class="lg:w-16 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="icons/default.png" alt="" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              집으로
            </span>
          </div>
          <div id="nextMapBt" class="lg:w-24 lg:h-16 sm:w-24 sm:h-24 rounded relative flex items-center justify-center bg-white">
            <img src="icons/default.png" alt="" class="w-14 h-14">
            <span class="absolute bottom-0 left-0 right-0 text-md text-white bg-black/80 text-center rounded-b">
              다음 지역으로
            </span>
          </div>
          <div class="w-[0px] lg:h-16 sm:h-24 rounded relative flex items-center justify-center bg-white">
           
          </div>
        </div>
      </div>
     <!-- 결과 텍스트창 -->
      <div class="bg-gray-600 px-3 py-2 mt-0 rounded">
        <div id="logText" class="flex flex-col overflow-y-auto max-h-40">
          <!-- 로그가 여기에 누적됨 -->
        </div>
      </div>

    </div>
  </div>

  <!-- 결과값 모달-->
  <div id="resultModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-80 z-50 hidden">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-2xl lg:max-w-xl p-6 relative">
      <!-- 닫기 버튼 -->
      <button id="closeResultModalBtn" class="absolute top-2 right-2 text-gray-600 hover:text-black text-2xl sm:text-4xl">
        ✕
      </button>
      
      <h2 class="text-4xl lg:text-xl  font-bold mb-4">결과 출력하기 </h2>
      <div id="detailedResults" class="text-2xl lg:text-lg space-y-4">
        <!-- 상세 결과 내용이 여기에 추가됩니다. -->
      </div>
      
     
      <div class="mt-4 text-center space-x-4">
        <button id="saveImgBt" class="px-4 py-6 mg-2 bg-gray-200 rounded-lg sm:text-4xl lg:text-2xl">저장하기</button>  
        
        <button id="gameStartBt" class="px-4 py-6 mg-4 bg-blue-500 text-white rounded-lg sm:text-4xl lg:text-2xl"> ???:진행시켜 </button>
        
      </div>
     
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script>
    const version = "0.4.12.12"; // ← 버전 숫자 변수
    document.getElementById("version-text").textContent = `ver ${version}`;
    document.getElementById("version-text2").textContent = `ver ${version}`;
    //다크모드 버튼
    document.getElementById("toggleDark").addEventListener("click", () => {
      document.body.classList.toggle("dark");
      isDarkMode = !isDarkMode;
      renderUI();
      localStorage.setItem("darkMode", isDarkMode);
    });
    //공지사항 모달
    const modal = document.getElementById("modal");
    const openBtn = document.getElementById("openModalBtn");
    const closeBtn = document.getElementById("closeModalBtn");

    openBtn.addEventListener("click", () => {
      modal.classList.remove("hidden");
    });

    closeBtn.addEventListener("click", () => {
      modal.classList.add("hidden");
    });
    //게임시작버튼
    const gameStartBtn = document.getElementById("gameStartBt");
    gameStartBtn.addEventListener("click", () => {
      gameModal.classList.remove("hidden");
      resultModal.classList.add("hidden");
      ResetAllGame();
    });

    //게임 모달
    const gameModal = document.getElementById("gameModal");
    const closeGameBtn = document.getElementById("closeGameModalBtn");
    closeGameBtn.addEventListener("click", () => {
      gameModal.classList.add("hidden");
    });
   

    // 모달 바깥 클릭 시 닫기
    modal.addEventListener("click", (e) => {
      if (e.target === modal) {
        modal.classList.add("hidden");
      }
    });





    //결과값 모달
    const resultModal = document.getElementById("resultModal");
    const openBtnResult = document.getElementById("generateResultBtn");
    const closeResultBtn = document.getElementById("closeResultModalBtn");
    //const closeResultBtn2 = document.getElementById("closeResultModalBtn2");
    openBtnResult.addEventListener("click", () => {
      resultModal.classList.remove("hidden");
      //내용추가
      const value1 = document.getElementById("result-icons").innerHTML;
      const value2 = document.getElementById("result-sum").innerHTML;
      const value3 = document.getElementById("resultPn").innerHTML;
      document.getElementById("detailedResults").innerHTML =`
          
            ${value1}            
            <div class="columns-2 gap-2 space-y-2">${value3}</div>
            <div class="mb-4 gap-2 p-3 border rounded-md shadow text-md lg:text-lg sm:text-4xl mr-2 font-bold text-center">
            ${value2} 
            </div>
            <div class="mb-2 space-y-0">
              <h3 class="text-center lg:text-2xl sm:text-2xl font-bold">"${translations[currentLang].ment}"</h3>
              <h3 class="text-center lg:text-sm sm:text-lg font-bold mt-2">${translations[currentLang].title} ver ${version} | K0KK0R0</h3>
            </div>
          <h2>ㅤ</h2>
      `;
      
        //console.log( getSelectedItemList() );
    });
    closeResultBtn.addEventListener("click", () => {
      resultModal.classList.add("hidden");
    });
    /*
    closeResultBtn2.addEventListener("click", () => {
      resultModal.classList.add("hidden");
    });
    */
    // 모달 바깥 클릭 시 닫기
    resultModal.addEventListener("click", (e) => {
      if (e.target === resultModal) {
        resultModal.classList.add("hidden");
      }   
    });
    
    const saveImgBtn = document.getElementById("saveImgBt");
    saveImgBtn.addEventListener("click", () => {
      // 모달 안의 흰색 상자만 캡처
        const target = document.getElementById("detailedResults");
        html2canvas(target, { scale: 1.5, backgroundColor: "#ffffff" }).then(canvas => {
          const link = document.createElement("a");
          link.download = "B42stat_capture.png";
          link.href = canvas.toDataURL("image/png");
          link.click();
        });
      });
  </script>

  <script src="core.js">ㅤ</script>
  <script src="gameManager.js"></script>
  
  <script src="game_zombie.js"></script>
  <script src="game_player.js"></script> 
</body>
</html>

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
    <title>Project Zomboid B42 stats</title>
    <script>    // ë°°ê²½ìƒ‰ ê¸°ë³¸ê°’
      window.bgColorClass = "bg-white-500";
      window.bgbtbgColorClass = "bg-gray-200";
      window.textColorClass = "text-black";
      window.darkbgColorClass = "bg-gray-700";
      
      window.darkbtbgColorClass = "bg-gray-800";
      window.darktextColorClass = "text-white";
      window.blueBgColorClass = "bg-blue-500";
      window.isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    
        <!-- íŒŒë¹„ì½˜ ì¶”ê°€ -->
        <link rel="icon" type="image/png" href="icons/Trait_slowlearner.png">
</head>
<body class="bg-white text-black flex items-center justify-center min-h-screen">
  <div class="w-full lg:max-w-5xl lg:mx-auto bg-gray-300 rounded-xl shadow p-4">
    
    <!-- ì™¼ìª½ ì „ì²´ (ìŠ¤í¬ë¡¤ë˜ëŠ” ë¶€ë¶„) -->
    <div class="flex-1 ">
      <!-- ìƒë‹¨ ê³ ì • ì˜ì—­ -->
      <div class="sticky top-0 bg-white z-10 p-4 rounded-2xl shadow-md max-h-[15vh]">
        <h2 id="titlename" class="lg:text-2xl sm:text-4xl font-bold mb-2 text-center">
          B42 project Zomboid ì§ì—… ë° íŠ¹ì„± ê³„ì‚°ê¸° 
        </h2>

        <div class="flex space-x-2 mb-4">
          <!-- ëª¨ë‹¬ ì—´ê¸° ë²„íŠ¼ -->
          <button id="openModalBtn" class="px-4 py-2 bg-blue-500 text-white lg:text-lg sm:text-2xl rounded-lg shadow">
            ê³µì§€ì‚¬í•­
          </button>
          <button id="toggleDark" class="px-4 py-2 lg:text-lg sm:text-2xl bg-gray-200 rounded">ì–´ë‘ ì˜Dark</button>
          <button id="lang-ko" class="px-4 py-2 lg:text-lg sm:text-2xl bg-gray-200 rounded">í•œêµ­ì–´</button>
          <button id="lang-en" class="px-4 py-2 lg:text-lg sm:text-2xl bg-gray-200 rounded">English</button>
        </div>
      </div>
  
    <!-- ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ, ìµœëŒ€ë†’ì´-->
    <div class="grid grid-cols-2 grid-rows-2 gap-2 lg:flex lg:space-x-4 sm:max-h-[60vh] lg:max-h-[70vh]">

      

      <!-- ê²°ê³¼ -->
      <div id="result-panel" class="border rounded-xl p-2 overflow-y-auto lg:w-40 min-w-[240px] mg-2">
        <h3 id="result-preview" class="lg:text-lg sm:text-2xl font-bold text-center lg:hidden">ê²°ê³¼ ë¯¸ë¦¬ë³´ê¸°</h3> <!--UIë³€ê²½í•¨ìˆ˜ í™•ì¸-->
        
        <div id="result-sum" class="gap-2 p-3 border rounded-md bg-white shadow text-md lg:text-md sm:text-2xl mr-2 font-bold text-center text-green-600">
          í•©ê³„: 0
        </div>

        <div id="resultPn" class="lg:columns-1 sm:columns-2 gap-2">
            <!--
            <div id="result-sum" class="gap-2 p-3 border rounded-md bg-white shadow lg:text-md sm:text-2xl mr-2 font-bold text-center text-green-600">
              í•©ê³„: 0
            </div>
            -->
            <div id="result-strength" class="gap-2 px-2 py-1 border rounded-md bg-white shadow lg:text-sm sm:text-2xl mr-2 text-center text-black-600">
              ê·¼ë ¥: 0
            </div>
            <div id="result-fitness" class="gap-2 px-2 py-1 border rounded-md bg-white shadow lg:text-sm sm:text-2xl mr-2 text-center text-black-600">
              ì²´ë ¥: 0
            </div>
          
        </div>
        <div id="result-icons">
          <!-- ì§ì—… ì•„ì´ì½˜ -->
          <div id="job-icons" class="flex justify-center gap-2 mb-2"></div>

          <!-- ì¼ë°˜ ì•„ì´ì½˜ -->
          <div id="other-icons" class="flex flex-wrap justify-center gap-2 mr-1"></div>
        </div>
      
      </div>
      <!-- ì§ì—… -->
      <div id="jobs" class="border rounded-md p-2 overflow-y-auto lg:flex-1 min-w-[200px] ">
        <h3 class="text-lg font-bold text-center lg:hidden">ì§ì—…</h3>
      </div>
      <!-- ê¸ì • -->
      <div id="positive-items" class="border rounded-md p-2 overflow-y-auto lg:flex-1 min-w-[150px]">
        <h3 class="text-lg font-bold text-center lg:hidden">ê¸ì •</h3>
      </div>

      <!-- ë¶€ì • -->
      <div id="negative-items" class="border rounded-md p-2 overflow-y-auto lg:flex-1 min-w-[150px]">
        <h3 class="text-lg font-bold text-center lg:hidden">ë¶€ì •</h3>
      </div>

    </div>
  </div>
  <!-- ê²°ê³¼ìƒì„± ë²„íŠ¼ -->
  <div class="flex justify-center mt-4 w-full">
    <button id="generateResultBtn" class="px-6 py-8 bg-blue-500 text-white lg:text-2xl sm:text-4xl rounded-lg shadow w-full">
      ê²°ê³¼ ìƒì„±
    </button>
  </div>
  <!-- í•˜ë‹¨ ë°” -->
  <div class="mt-4 text-center">
    <p class="text-gray-500 text-2xl lg:text-sm"> <span id="version-text"></span> | ì œì‘ì: K0KK0R0 |
      í”„ì¢€ê°¤: <a href="https://gall.dcinside.com/mgallery/board/lists/?id=pzom" target="_blank" class="text-blue-500 underline text-2xl lg:text-sm">ë§í¬</a> |
       ìœ„í‚¤ ë§í¬: 
       <a href="https://pzwiki.net/wiki/Trait" target="_blank" class="text-blue-500 underline text-2xl lg:text-sm"> Trait</a> ,
       <a href="https://pzwiki.net/wiki/Occupation" target="_blank" class="text-blue-500 underline text-2xl lg:text-sm"> Occupation</a>  | 
       
    </p>
  </div>

  <!-- ëª¨ë‹¬ (ì²˜ìŒì—” hidden) -->
  <div id="modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-80 z-50">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-2xl lg:max-w-2xl p-6 relative">
      <!-- ë‹«ê¸° ë²„íŠ¼ -->
      <button id="closeModalBtn" class="absolute top-2 right-2 text-gray-600 hover:text-black text-2xl sm:text-4xl">
        âœ•
      </button>
      
      <h2 class="text-4xl lg:text-xl  font-bold mb-4">ê³µì§€ì‚¬í•­ </h2>
      <p class="mb-2 text-3xl md:text-lg"> ğŸ“¢ <span id="version-text2"></span> ì—…ë°ì´íŠ¸ ì•ˆë‚´</p>
      
      <p class="mb-1 text-2xl lg:text-lg">- ì–´ë‘ ì˜ Darkëª¨ë“œ ì ìš©(ì‹œìŠ¤í…œ ê¸°ë³¸ê°’ì„ ë”°ë¼ê°‘ë‹ˆë‹¤) </p>
      <p class="mb-1 text-2xl lg:text-lg">- ê²°ê³¼ê°’ì„ pngíŒŒì¼ë¡œ ì €ì¥ í•  ìˆ˜ ìˆë„ë¡ ì‘ì—… </p>
      <p class="mb-1 text-2xl lg:text-lg">- ì¤‘ë³µìœ¼ë¡œ ì„ íƒ ë¶ˆê°€ëŠ¥í•œ íŠ¸ë ˆì‡ ì‘ì—…</p>    
      <p class="mb-1 text-2xl lg:text-lg">- Crafty(ì¬ì£¼ê¾¼) íŠ¹ì„± ì¶”ê°€</p>
      <p class="mb-1 text-2xl lg:text-lg">- ì„ íƒí•œ íŠ¸ë ˆì‡ ì•„ì´ì½˜ì´ ê²°ê³¼ì°½ì— ëœ¨ë„ë¡ ìˆ˜ì •</p>
      <p class="mb-1 text-2xl lg:text-lg">** ë³¸ í•­ëª©ì€ ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ** </p>
      <p class="mb-1 text-2xl lg:text-lg"> ìì„¸í•œ ë‚´ìš©ì€ ê³µì‹ ìœ„í‚¤ì™€ í”„ì¢€ê°¤ì„ ì°¸ê³ í•˜ì„¸ìš”</p>
      
      <!--
      <div class="mt-4 text-right">
        <button id="closeModalBtn2" class="px-4 py-2 bg-gray-200 rounded-lg sm:text-4xl lg:text-2xl">ë‹«ê¸°</button>
      </div>
      -->
    </div>
  </div>
  <!-- ê²°ê³¼ê°’ ëª¨ë‹¬-->
  <div id="resultModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-80 z-50 hidden">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-2xl lg:max-w-xl p-6 relative">
      <!-- ë‹«ê¸° ë²„íŠ¼ -->
      <button id="closeResultModalBtn" class="absolute top-2 right-2 text-gray-600 hover:text-black text-2xl sm:text-4xl">
        âœ•
      </button>
      
      <h2 class="text-4xl lg:text-xl  font-bold mb-4">ê²°ê³¼ ì¶œë ¥í•˜ê¸° </h2>
      <div id="detailedResults" class="text-2xl lg:text-lg space-y-4">
        <!-- ìƒì„¸ ê²°ê³¼ ë‚´ìš©ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤. -->
      </div>
      
     
      <div class="mt-4 text-center space-x-4">
        <button id="saveImgBt" class="px-4 py-6 mg-2 bg-gray-200 rounded-lg sm:text-4xl lg:text-2xl">ì €ì¥í•˜ê¸°</button>  
        <!--  
        <button id="gameStartBt" class="px-4 py-6 mg-4 bg-blue-500 text-white rounded-lg sm:text-4xl lg:text-2xl"> ???:ì§„í–‰ì‹œì¼œ </button>
        -->
      </div>
     
    </div>


  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script>
    const version = "0.4.12.7"; // â† ë²„ì „ ìˆ«ì ë³€ìˆ˜
    document.getElementById("version-text").textContent = `ver ${version}`;
    document.getElementById("version-text2").textContent = `ver ${version}`;

    //ê³µì§€ì‚¬í•­ ëª¨ë‹¬
    const modal = document.getElementById("modal");
    const openBtn = document.getElementById("openModalBtn");
    const closeBtn = document.getElementById("closeModalBtn");

    openBtn.addEventListener("click", () => {
      modal.classList.remove("hidden");
    });

    closeBtn.addEventListener("click", () => {
      modal.classList.add("hidden");
    });
    
    //ë‹¤í¬ëª¨ë“œ ë²„íŠ¼
    document.getElementById("toggleDark").addEventListener("click", () => {
      document.body.classList.toggle("dark");
      isDarkMode = !isDarkMode;
      renderUI();
    });
   

    // ëª¨ë‹¬ ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
    modal.addEventListener("click", (e) => {
      if (e.target === modal) {
        modal.classList.add("hidden");
      }
    });
    //ê²°ê³¼ê°’ ëª¨ë‹¬
    const resultModal = document.getElementById("resultModal");
    const openBtnResult = document.getElementById("generateResultBtn");
    const closeResultBtn = document.getElementById("closeResultModalBtn");
    //const closeResultBtn2 = document.getElementById("closeResultModalBtn2");
    openBtnResult.addEventListener("click", () => {
      resultModal.classList.remove("hidden");
      //ë‚´ìš©ì¶”ê°€
      const value1 = document.getElementById("result-icons").innerHTML;
      const value2 = document.getElementById("result-sum").innerHTML;
      const value3 = document.getElementById("resultPn").innerHTML;
      document.getElementById("detailedResults").innerHTML =`
          
            ${value1}            
            <div class="columns-2 gap-2 space-y-2">${value3}</div>
            <div class="mb-4 gap-2 p-3 border rounded-md bg-white-500 shadow text-md lg:text-lg sm:text-4xl mr-2 font-bold text-center text-green-600">  
            ${value2} 
            </div>
            <div class="mb-2 space-y-0">
              <h3 class="text-center lg:text-2xl sm:text-2xl font-bold">"${translations[currentLang].ment}"</h3>
              <h3 class="text-center lg:text-sm sm:text-lg font-bold mt-2">${translations[currentLang].title} ver ${version} | K0KK0R0</h3>
            </div>
          <h2>ã…¤</h2>
      `;
    });
    closeResultBtn.addEventListener("click", () => {
      resultModal.classList.add("hidden");
    });
    /*
    closeResultBtn2.addEventListener("click", () => {
      resultModal.classList.add("hidden");
    });
    */
    // ëª¨ë‹¬ ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
    resultModal.addEventListener("click", (e) => {
      if (e.target === resultModal) {
        resultModal.classList.add("hidden");
      }   
    });
    
    const saveImgBtn = document.getElementById("saveImgBt");
    saveImgBtn.addEventListener("click", () => {
      // ëª¨ë‹¬ ì•ˆì˜ í°ìƒ‰ ìƒìë§Œ ìº¡ì²˜
        const target = document.getElementById("detailedResults");
        html2canvas(target, { scale: 1.5, backgroundColor: "#ffffff" }).then(canvas => {
          const link = document.createElement("a");
          link.download = "B42stat_capture.png";
          link.href = canvas.toDataURL("image/png");
          link.click();
        });
      });
  </script>

  <script src="core.js">ã…¤</script>
   
</body>
</html>
